<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSM Gandhinagar - Project Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 1.2em;
        }
        
        .section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        
        .section h3 {
            color: #764ba2;
            font-size: 1.3em;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .tech-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .tech-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .api-endpoint {
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 10px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            font-size: 0.8em;
            margin-right: 10px;
        }
        
        .get { background: #28a745; }
        .post { background: #007bff; }
        .put { background: #ffc107; color: #333; }
        .delete { background: #dc3545; }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }
        
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .feature-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .architecture-diagram {
            background: #f8f9fa;
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
        }
        
        .flow-item {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .arrow {
            font-size: 1.5em;
            color: #667eea;
            margin: 0 10px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success { background: #28a745; }
        .status-warning { background: #ffc107; }
        .status-info { background: #17a2b8; }
        
        .deployment-steps {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .deployment-steps ol {
            padding-left: 20px;
        }
        
        .deployment-steps li {
            margin: 10px 0;
            padding: 5px 0;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .tech-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üèõÔ∏è BSM Gandhinagar</h1>
            <p>NGO Management Platform - Complete Project Documentation</p>
            <div style="margin-top: 15px;">
                <span class="badge">React + TypeScript</span>
                <span class="badge">Node.js + MongoDB</span>
                <span class="badge">Vercel Serverless</span>
                <span class="badge">JWT Authentication</span>
            </div>
        </div>

        <!-- Project Overview -->
        <div class="section">
            <h2>üìã What is BSM Gandhinagar?</h2>
            <p><strong>BSM Gandhinagar</strong> is a comprehensive NGO management platform designed for the Brahma Samaj Mandal organization in Gandhinagar. It provides both a public-facing website and a powerful admin dashboard for managing all aspects of NGO operations.</p>
            
            <h3>üéØ Purpose & Goals</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>üåê Public Website</h4>
                    <p>Modern, responsive website showcasing the organization's mission, events, and allowing public interaction through donations and inquiries.</p>
                </div>
                <div class="feature-item">
                    <h4>üë• Member Management</h4>
                    <p>Complete CRUD system for managing organization members with location-based directory and WhatsApp integration.</p>
                </div>
                <div class="feature-item">
                    <h4>üìÖ Event Organization</h4>
                    <p>Full event lifecycle management from creation to attendee tracking with category-based filtering.</p>
                </div>
                <div class="feature-item">
                    <h4>üí∞ Donation Tracking</h4>
                    <p>Secure donation system with multiple payment methods, campaign tracking, and approval workflow.</p>
                </div>
                <div class="feature-item">
                    <h4>üìä Analytics Dashboard</h4>
                    <p>Real-time dashboard with key metrics, charts, and recent activities for data-driven decisions.</p>
                </div>
                <div class="feature-item">
                    <h4>üì¨ Inquiry Management</h4>
                    <p>Contact form handling with admin review system for managing public inquiries and feedback.</p>
                </div>
            </div>
        </div>

        <!-- Tech Stack -->
        <div class="section">
            <h2>‚ö° Technology Stack</h2>
            
            <div class="tech-grid">
                <div class="tech-card">
                    <h4>üé® Frontend</h4>
                    <ul>
                        <li><strong>React 18</strong> - UI Library</li>
                        <li><strong>TypeScript</strong> - Type Safety</li>
                        <li><strong>Vite</strong> - Build Tool</li>
                        <li><strong>Tailwind CSS</strong> - Styling</li>
                        <li><strong>Chart.js</strong> - Data Visualization</li>
                        <li><strong>Zustand</strong> - State Management</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üñ•Ô∏è Backend</h4>
                    <ul>
                        <li><strong>Node.js</strong> - Runtime</li>
                        <li><strong>Express.js</strong> - Local Development</li>
                        <li><strong>Vercel Serverless</strong> - Production API</li>
                        <li><strong>JWT</strong> - Authentication</li>
                        <li><strong>bcryptjs</strong> - Password Hashing</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üóÑÔ∏è Database</h4>
                    <ul>
                        <li><strong>MongoDB Atlas</strong> - Cloud Database</li>
                        <li><strong>Connection Pooling</strong> - Optimization</li>
                        <li><strong>Indexed Queries</strong> - Performance</li>
                        <li><strong>Schema Validation</strong> - Data Integrity</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üöÄ Deployment</h4>
                    <ul>
                        <li><strong>Vercel</strong> - Hosting Platform</li>
                        <li><strong>GitHub</strong> - Version Control</li>
                        <li><strong>Environment Variables</strong> - Config</li>
                        <li><strong>CORS</strong> - Cross-Origin Support</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Architecture -->
        <div class="section">
            <h2>üèóÔ∏è System Architecture</h2>
            
            <div class="architecture-diagram">
                <div style="margin: 20px 0;">
                    <div class="flow-item">React Frontend</div>
                    <span class="arrow">‚Üí</span>
                    <div class="flow-item">Vercel API</div>
                    <span class="arrow">‚Üí</span>
                    <div class="flow-item">MongoDB Atlas</div>
                </div>
                <div style="margin: 20px 0;">
                    <div class="flow-item">Vite Dev Server</div>
                    <span class="arrow">‚Üí</span>
                    <div class="flow-item">Local Express</div>
                    <span class="arrow">‚Üí</span>
                    <div class="flow-item">Database</div>
                </div>
            </div>
            
            <h3>üîÑ Development vs Production</h3>
            <div class="tech-grid">
                <div class="tech-card">
                    <h4>üßë‚Äçüíª Development</h4>
                    <ul>
                        <li>Vite dev server (port 5173)</li>
                        <li>Vercel dev server (port 3000)</li>
                        <li>Local MongoDB connection</li>
                        <li>Hot module replacement</li>
                        <li>Debug logging enabled</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üåê Production</h4>
                    <ul>
                        <li>Vercel edge functions</li>
                        <li>Static asset serving</li>
                        <li>MongoDB Atlas cluster</li>
                        <li>Connection pooling</li>
                        <li>Error monitoring</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- API Documentation -->
        <div class="section">
            <h2>üîå API Structure & Endpoints</h2>
            
            <h3>üîê Authentication Flow</h3>
            <div class="code-block">
// Login Request
POST /api/auth/login
{
  "username": "admin",
  "password": "admin123"
}

// Response
{
  "token": "jwt_token_here",
  "user": { "username": "admin", "role": "admin" }
}

// Authenticated Request Header
Authorization: Bearer jwt_token_here
            </div>
            
            <h3>üåê Public Endpoints</h3>
            
            <div class="api-endpoint">
                <span class="method get">GET</span>
                <strong>/api/utils?type=hello</strong>
                <p>Basic health check and API status</p>
                <div class="code-block">
Response: {
  "message": "Hello from BSM API!",
  "timestamp": "2025-01-03T10:30:00.000Z",
  "environment": "development"
}
                </div>
            </div>
            
            <div class="api-endpoint">
                <span class="method get">GET</span>
                <strong>/api/events</strong>
                <p>Get all public events (upcoming and past)</p>
                <div class="code-block">
Response: {
  "events": [
    {
      "_id": "event_id",
      "title": "Community Gathering",
      "description": "Monthly community meeting",
      "date": "2025-01-15",
      "time": "18:00",
      "location": "Community Hall",
      "category": "community",
      "attendees": ["member1", "member2"]
    }
  ]
}
                </div>
            </div>
            
            <div class="api-endpoint">
                <span class="method get">GET</span>
                <strong>/api/donations?recent=true</strong>
                <p>Get recent approved donations for public display</p>
                <div class="code-block">
Response: {
  "donations": [
    {
      "_id": "donation_id",
      "donorName": "John Doe",
      "amount": 1000,
      "campaign": "Education Fund",
      "date": "2025-01-01",
      "approved": true
    }
  ]
}
                </div>
            </div>
            
            <div class="api-endpoint">
                <span class="method get">GET</span>
                <strong>/api/members?public=true</strong>
                <p>Get public member directory with location data</p>
                <div class="code-block">
Response: {
  "members": [
    {
      "_id": "member_id",
      "name": "Jane Smith",
      "city": "Gandhinagar",
      "state": "Gujarat",
      "phone": "+91-9876543210",
      "whatsapp": "+91-9876543210",
      "membershipType": "premium",
      "status": "active"
    }
  ]
}
                </div>
            </div>
            
            <h3>üîí Admin Endpoints (Require Authentication)</h3>
            
            <div class="api-endpoint">
                <span class="method get">GET</span>
                <strong>/api/admin?type=posts</strong>
                <p>Get all blog posts/announcements for admin management</p>
                <div class="code-block">
Headers: Authorization: Bearer jwt_token
Response: {
  "posts": [
    {
      "_id": "post_id",
      "title": "Important Announcement",
      "content": "Post content here...",
      "author": "admin",
      "createdAt": "2025-01-01T00:00:00.000Z",
      "status": "published"
    }
  ]
}
                </div>
            </div>
            
            <div class="api-endpoint">
                <span class="method post">POST</span>
                <strong>/api/members</strong>
                <p>Create new member (admin only)</p>
                <div class="code-block">
Headers: Authorization: Bearer jwt_token
Body: {
  "name": "New Member",
  "email": "member@example.com",
  "phone": "+91-9876543210",
  "address": "123 Main St, Gandhinagar",
  "membershipType": "regular",
  "whatsapp": "+91-9876543210"
}
                </div>
            </div>
            
            <div class="api-endpoint">
                <span class="method put">PUT</span>
                <strong>/api/donations</strong>
                <p>Update donation status (approve/reject)</p>
                <div class="code-block">
Headers: Authorization: Bearer jwt_token
Body: {
  "_id": "donation_id",
  "approved": true,
  "adminNotes": "Verified and approved"
}
                </div>
            </div>
            
            <div class="api-endpoint">
                <span class="method get">GET</span>
                <strong>/api/admin?type=recent-activities</strong>
                <p>Get recent activities across all modules for dashboard</p>
                <div class="code-block">
Response: {
  "activities": [
    {
      "type": "donation",
      "description": "New donation of ‚Çπ5000 received",
      "timestamp": "2025-01-03T10:30:00.000Z",
      "status": "pending"
    },
    {
      "type": "member",
      "description": "New member registration: John Doe",
      "timestamp": "2025-01-03T09:15:00.000Z",
      "status": "active"
    }
  ]
}
                </div>
            </div>
        </div>

        <!-- Database Schema -->
        <div class="section">
            <h2>üóÉÔ∏è Database Schema</h2>
            
            <h3>üìä Collections Overview</h3>
            <div class="tech-grid">
                <div class="tech-card">
                    <h4>üë§ Users</h4>
                    <ul>
                        <li>username (string)</li>
                        <li>password (hashed)</li>
                        <li>role (admin/user)</li>
                        <li>createdAt (date)</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üë• Members</h4>
                    <ul>
                        <li>name, email, phone</li>
                        <li>address, city, state</li>
                        <li>membershipType</li>
                        <li>whatsapp, status</li>
                        <li>joinDate, lastActive</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üìÖ Events</h4>
                    <ul>
                        <li>title, description</li>
                        <li>date, time, location</li>
                        <li>category, capacity</li>
                        <li>attendees (array)</li>
                        <li>createdBy, status</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üí∞ Donations</h4>
                    <ul>
                        <li>donorName, email, phone</li>
                        <li>amount, campaign</li>
                        <li>paymentMethod</li>
                        <li>approved (boolean)</li>
                        <li>date, adminNotes</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üì¨ Inquiries</h4>
                    <ul>
                        <li>name, email, subject</li>
                        <li>message, phone</li>
                        <li>status (new/replied)</li>
                        <li>createdAt, repliedAt</li>
                        <li>adminResponse</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üìù Posts</h4>
                    <ul>
                        <li>title, content</li>
                        <li>author, category</li>
                        <li>status (draft/published)</li>
                        <li>createdAt, updatedAt</li>
                        <li>tags (array)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Development Workflow -->
        <div class="section">
            <h2>‚öôÔ∏è Development Workflow</h2>
            
            <h3>üöÄ Quick Start</h3>
            <div class="code-block">
# Clone the repository
git clone [repository-url]
cd project

# Install dependencies
npm install

# Set up environment variables
cp .env.example .env
# Edit .env with your MongoDB connection string

# Start development servers
npm run dev

# This starts:
# - Vercel dev server on port 3000 (API)
# - Vite dev server on port 5173 (Frontend)
            </div>
            
            <h3>üß™ Testing Commands</h3>
            <div class="code-block">
# Test API health
npm run test:api

# Test admin authentication
npm run test:admin

# Check system status
npm run status

# Test specific functionality
node test-complete-system.js
            </div>
            
            <h3>üì¶ Build & Deployment</h3>
            <div class="code-block">
# Build for production
npm run build

# Deploy to Vercel
vercel --prod

# Test production deployment
node test-vercel-deployment.js https://your-domain.vercel.app
            </div>
        </div>

        <!-- Serverless Architecture & Troubleshooting -->
        <div class="section">
            <h2>‚òÅÔ∏è Serverless Architecture Explained</h2>
            
            <h3>üîÑ What Makes This Project Serverless?</h3>
            <div class="architecture-diagram">
                <div style="margin: 20px 0;">
                    <div class="flow-item">Traditional Server</div>
                    <span class="arrow">‚ùå</span>
                    <div style="display: inline-block; padding: 10px; color: #dc3545;">Always Running ‚Ä¢ Fixed Costs ‚Ä¢ Manual Scaling</div>
                </div>
                <div style="margin: 20px 0;">
                    <div class="flow-item">Serverless Functions</div>
                    <span class="arrow">‚úÖ</span>
                    <div style="display: inline-block; padding: 10px; color: #28a745;">On-Demand ‚Ä¢ Pay-per-Use ‚Ä¢ Auto-Scaling</div>
                </div>
            </div>
            
            <div class="feature-list">
                <div class="feature-item">
                    <h4>üöÄ No Traditional Server</h4>
                    <p>Instead of running a continuous Node.js/Express server, each API endpoint is a separate "function" that only runs when called. This eliminates server maintenance, reduces costs, and provides automatic scaling.</p>
                </div>
                <div class="feature-item">
                    <h4>‚ö° Function-Based Architecture</h4>
                    <p>Each file in the <code>/api</code> folder becomes a serverless function. For example, <code>api/members.js</code> becomes <code>yoursite.com/api/members</code></p>
                </div>
                <div class="feature-item">
                    <h4>üîÑ Cold Starts</h4>
                    <p>Functions "sleep" when not in use and "wake up" when called. The first request after inactivity may be slower (cold start), but subsequent requests are fast.</p>
                </div>
                <div class="feature-item">
                    <h4>üìä Automatic Scaling</h4>
                    <p>If 1000 users hit your API simultaneously, Vercel automatically creates 1000 function instances. No configuration needed!</p>
                </div>
            </div>
            
            <h3>üîß How We Achieved Serverless</h3>
            <div class="code-block">
// Before: Traditional Express Server (server/index.js)
const express = require('express');
const app = express();
app.listen(3000); // ‚ùå Always running, uses resources

// After: Serverless Function (api/members.js)
export default function handler(req, res) {
  // ‚úÖ Only runs when called, no continuous resource usage
  if (req.method === 'GET') {
    // Handle GET request
  }
}
            </div>
            
            <h3>üí° Serverless Benefits for NGOs</h3>
            <div class="tech-grid">
                <div class="tech-card">
                    <h4>üí∞ Cost Effective</h4>
                    <ul>
                        <li>Pay only for actual usage</li>
                        <li>No idle server costs</li>
                        <li>Free tier covers most NGO needs</li>
                        <li>Scales down to zero when unused</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üõ°Ô∏è High Reliability</h4>
                    <ul>
                        <li>No single point of failure</li>
                        <li>Automatic failover</li>
                        <li>Global edge deployment</li>
                        <li>99.9% uptime guarantee</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üîß Zero Maintenance</h4>
                    <ul>
                        <li>No server updates needed</li>
                        <li>Automatic security patches</li>
                        <li>No infrastructure management</li>
                        <li>Focus on features, not servers</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üìà Auto Scaling</h4>
                    <ul>
                        <li>Handles traffic spikes automatically</li>
                        <li>No manual capacity planning</li>
                        <li>Instant global deployment</li>
                        <li>Perfect for event-driven NGO activities</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Troubleshooting Guide -->
        <div class="section">
            <h2>üîß Complete Troubleshooting Guide</h2>
            
            <h3>üö® Common Server/Serverless Issues</h3>
            
            <div class="api-endpoint" style="border-left-color: #dc3545;">
                <h4>‚ùå Issue: "Cannot connect to server" or "Network Error"</h4>
                <div class="feature-list">
                    <div class="feature-item">
                        <h4>üîç Diagnosis</h4>
                        <p>Frontend can't reach the API endpoints</p>
                        <div class="code-block">
// Check if API is running
fetch('/api/utils?type=hello')
  .then(res => res.json())
  .then(data => console.log(data))
  .catch(err => console.error('API Error:', err));
                        </div>
                    </div>
                    <div class="feature-item">
                        <h4>üõ†Ô∏è Solutions</h4>
                        <ul>
                            <li><strong>Development:</strong> Ensure Vercel dev server is running on port 3000</li>
                            <li><strong>Production:</strong> Check if domain is correctly configured</li>
                            <li><strong>CORS:</strong> Verify CORS headers allow your frontend domain</li>
                            <li><strong>Environment:</strong> Confirm all environment variables are set</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="api-endpoint" style="border-left-color: #ffc107;">
                <h4>‚ö†Ô∏è Issue: "Function timeout" or "504 Gateway Timeout"</h4>
                <div class="feature-list">
                    <div class="feature-item">
                        <h4>üîç Root Cause</h4>
                        <p>Serverless functions have execution time limits (10s for Hobby plan)</p>
                    </div>
                    <div class="feature-item">
                        <h4>üõ†Ô∏è Solutions</h4>
                        <div class="code-block">
// Optimize MongoDB connection
import { connectToDatabase } from '../_lib/mongodb.js';

export default async function handler(req, res) {
  try {
    // Set timeout for database operations
    const timeoutPromise = new Promise((_, reject) => {
      setTimeout(() => reject(new Error('Database timeout')), 8000);
    });
    
    const dbPromise = connectToDatabase();
    const { db } = await Promise.race([dbPromise, timeoutPromise]);
    
    // Your logic here...
  } catch (error) {
    console.error('Function timeout:', error);
    res.status(504).json({ error: 'Function timeout' });
  }
}
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="api-endpoint" style="border-left-color: #17a2b8;">
                <h4>üîÑ Issue: "Cold Start Delays"</h4>
                <div class="feature-list">
                    <div class="feature-item">
                        <h4>üîç What happens</h4>
                        <p>First request after inactivity takes 2-5 seconds as function "wakes up"</p>
                    </div>
                    <div class="feature-item">
                        <h4>üõ†Ô∏è Mitigation Strategies</h4>
                        <ul>
                            <li><strong>Keep-alive:</strong> Ping critical endpoints every 5 minutes</li>
                            <li><strong>Connection Pooling:</strong> Reuse database connections</li>
                            <li><strong>Lightweight Functions:</strong> Minimize dependencies</li>
                            <li><strong>User Feedback:</strong> Show loading states for first requests</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="api-endpoint" style="border-left-color: #28a745;">
                <h4>üóÑÔ∏è Issue: "Database Connection Errors"</h4>
                <div class="feature-list">
                    <div class="feature-item">
                        <h4>üîç Common Scenarios</h4>
                        <ul>
                            <li>MongoNetworkError: Connection timeout</li>
                            <li>Authentication failed</li>
                            <li>Too many connections</li>
                            <li>Database not found</li>
                        </ul>
                    </div>
                    <div class="feature-item">
                        <h4>üõ†Ô∏è Database Fixes</h4>
                        <div class="code-block">
// Robust MongoDB connection (api/_lib/mongodb.js)
import { MongoClient } from 'mongodb';

let cachedClient = null;
let cachedDb = null;

export async function connectToDatabase() {
  // Reuse existing connection if available
  if (cachedClient && cachedDb) {
    return { client: cachedClient, db: cachedDb };
  }

  try {
    const client = new MongoClient(process.env.MONGODB_URI, {
      maxPoolSize: 10,           // Limit connections
      serverSelectionTimeoutMS: 5000,  // Timeout quickly
      socketTimeoutMS: 45000,    // Socket timeout
      maxIdleTimeMS: 30000,      // Close idle connections
      retryWrites: true,         // Retry failed writes
    });

    await client.connect();
    const db = client.db('bsm_gandhinagar');
    
    // Cache for reuse
    cachedClient = client;
    cachedDb = db;
    
    return { client, db };
  } catch (error) {
    console.error('MongoDB connection error:', error);
    throw new Error('Database connection failed');
  }
}
                        </div>
                    </div>
                </div>
            </div>
            
            <h3>üîç Debugging Serverless Functions</h3>
            <div class="code-block">
// Debug endpoint to check environment
GET /api/env-check

// Response shows:
{
  "environment": "production",
  "hasDatabase": true,
  "hasJwtSecret": true,
  "timestamp": "2025-07-03T10:30:00.000Z",
  "nodeVersion": "18.x",
  "memoryUsage": "45MB",
  "platform": "vercel"
}
            </div>
            
            <h3>‚ö° Performance Optimization for Serverless</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>üì¶ Bundle Size Optimization</h4>
                    <ul>
                        <li>Use dynamic imports for large dependencies</li>
                        <li>Avoid importing entire libraries</li>
                        <li>Use tree-shaking compatible packages</li>
                        <li>Keep function size under 50MB</li>
                    </ul>
                </div>
                <div class="feature-item">
                    <h4>üîÑ Connection Reuse</h4>
                    <ul>
                        <li>Cache database connections between invocations</li>
                        <li>Use singleton pattern for external service clients</li>
                        <li>Implement connection pooling</li>
                        <li>Close connections properly on errors</li>
                    </ul>
                </div>
                <div class="feature-item">
                    <h4>‚è±Ô∏è Execution Time</h4>
                    <ul>
                        <li>Set timeouts for all external calls</li>
                        <li>Use Promise.race() for critical operations</li>
                        <li>Implement circuit breakers for unreliable services</li>
                        <li>Log execution times for monitoring</li>
                    </ul>
                </div>
                <div class="feature-item">
                    <h4>üìä Memory Management</h4>
                    <ul>
                        <li>Clear large objects after use</li>
                        <li>Use streaming for large data processing</li>
                        <li>Monitor memory usage in logs</li>
                        <li>Avoid memory leaks in global variables</li>
                    </ul>
                </div>
            </div>
            
            <h3>üöÄ Emergency Recovery Steps</h3>
            <div class="deployment-steps">
                <h4>üÜò If Everything Breaks</h4>
                <ol>
                    <li><strong>Check Vercel Dashboard:</strong> Look for deployment errors and function logs</li>
                    <li><strong>Verify Environment Variables:</strong> Ensure all required env vars are set correctly</li>
                    <li><strong>Test Locally:</strong> Run <code>vercel dev</code> to reproduce issues locally</li>
                    <li><strong>Check Database:</strong> Verify MongoDB Atlas connection and IP whitelist</li>
                    <li><strong>Review Logs:</strong> Check Vercel function logs for specific error messages</li>
                    <li><strong>Rollback:</strong> Deploy previous working version using Vercel rollback</li>
                    <li><strong>Contact Support:</strong> If all else fails, contact Vercel support with error details</li>
                </ol>
            </div>
            
            <h3>üì± Quick Health Check Commands</h3>
            <div class="code-block">
# Test all endpoints quickly
node test-api-health.js

# Check specific functionality
node test-vercel-deployment.js https://your-domain.vercel.app

# Monitor in real-time
curl -X GET "https://your-domain.vercel.app/api/env-check"

# Check database connectivity
curl -X GET "https://your-domain.vercel.app/api/utils?type=hello"
            </div>
        </div>

        <!-- Monitoring & Maintenance -->
        <div class="section">
            <h2>üìä Monitoring & Maintenance Guide</h2>
            
            <h3>üîç Environment Variable Management</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>üìã Environment Setup Checklist</h4>
                    <div class="code-block">
# Required Environment Variables (.env.example)
# Database Configuration
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/bsm_gandhinagar
DATABASE_URL=mongodb+srv://username:password@cluster.mongodb.net/bsm_gandhinagar

# Authentication
JWT_SECRET=your-super-secure-jwt-secret-key-here-minimum-32-chars

# Node Environment
NODE_ENV=development  # or production

# Optional: External Service APIs
PAYMENT_GATEWAY_API_KEY=optional-payment-api-key
EMAIL_SERVICE_API_KEY=optional-email-service-key
WEBHOOK_SECRET=optional-webhook-verification-secret

# Optional: Monitoring & Analytics
ANALYTICS_API_KEY=optional-analytics-key
ERROR_TRACKING_DSN=optional-error-tracking-url
                    </div>
                </div>
                
                <div class="feature-item">
                    <h4>üîê Environment Security Best Practices</h4>
                    <ul>
                        <li><strong>Never commit .env files:</strong> Always add .env to .gitignore</li>
                        <li><strong>Use strong secrets:</strong> JWT_SECRET should be at least 32 characters</li>
                        <li><strong>Separate environments:</strong> Different secrets for dev/staging/production</li>
                        <li><strong>Regular rotation:</strong> Change secrets periodically (quarterly)</li>
                        <li><strong>Access control:</strong> Limit who can view/modify environment variables</li>
                    </ul>
                </div>
                
                <div class="feature-item">
                    <h4>üõ†Ô∏è Environment Troubleshooting</h4>
                    <div class="code-block">
# Quick environment check script
node -e "
console.log('Environment Check:');
console.log('NODE_ENV:', process.env.NODE_ENV);
console.log('MongoDB URI:', process.env.MONGODB_URI ? '‚úÖ Set' : '‚ùå Missing');
console.log('JWT Secret:', process.env.JWT_SECRET ? '‚úÖ Set' : '‚ùå Missing');
console.log('Database URL:', process.env.DATABASE_URL ? '‚úÖ Set' : '‚ùå Missing');
"

# Test environment with API endpoint
curl "http://localhost:3000/api/env-check"
                    </div>
                </div>
            </div>
            
            <h3>üìà Performance Monitoring</h3>
            <div class="tech-grid">
                <div class="tech-card">
                    <h4>‚ö° Vercel Analytics</h4>
                    <ul>
                        <li>Function execution times</li>
                        <li>Cold start frequency</li>
                        <li>Error rates and types</li>
                        <li>Memory usage patterns</li>
                        <li>Geographic performance</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üóÑÔ∏è MongoDB Monitoring</h4>
                    <ul>
                        <li>Connection pool usage</li>
                        <li>Query execution times</li>
                        <li>Database size growth</li>
                        <li>Index performance</li>
                        <li>Connection timeouts</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üë• User Experience</h4>
                    <ul>
                        <li>Page load times</li>
                        <li>API response times</li>
                        <li>Error frequency</li>
                        <li>User flow completion</li>
                        <li>Device/browser usage</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üö® Alert Systems</h4>
                    <ul>
                        <li>Function timeout alerts</li>
                        <li>Database connection failures</li>
                        <li>High error rates</li>
                        <li>Unusual traffic patterns</li>
                        <li>Deployment failures</li>
                    </ul>
                </div>
            </div>
            
            <h3>üîÑ Regular Maintenance Tasks</h3>
            <div class="api-endpoint" style="border-left-color: #28a745;">
                <h4>üìÖ Daily Checks (Automated)</h4>
                <div class="code-block">
# Daily health check script (can be automated with cron/GitHub Actions)
#!/bin/bash

echo "üîç BSM Gandhinagar Daily Health Check"
echo "Date: $(date)"

# Test API endpoints
echo "Testing API health..."
curl -f "https://your-domain.vercel.app/api/utils?type=hello" || echo "‚ùå API health check failed"

# Test database connectivity
echo "Testing database connection..."
curl -f "https://your-domain.vercel.app/api/env-check" || echo "‚ùå Database check failed"

# Test authentication
echo "Testing admin authentication..."
# Add authentication test logic here

echo "‚úÖ Daily check completed"
                </div>
            </div>
            
            <div class="api-endpoint" style="border-left-color: #ffc107;">
                <h4>üìä Weekly Reviews</h4>
                <ul>
                    <li><strong>Performance Analysis:</strong> Review Vercel function logs for slow responses</li>
                    <li><strong>Error Tracking:</strong> Analyze error patterns and fix recurring issues</li>
                    <li><strong>Database Cleanup:</strong> Remove old test data, optimize queries</li>
                    <li><strong>Security Audit:</strong> Check for failed login attempts, unusual access patterns</li>
                    <li><strong>Backup Verification:</strong> Ensure MongoDB Atlas backups are working</li>
                </ul>
            </div>
            
            <div class="api-endpoint" style="border-left-color: #17a2b8;">
                <h4>üîß Monthly Maintenance</h4>
                <ul>
                    <li><strong>Dependency Updates:</strong> Update npm packages and check for vulnerabilities</li>
                    <li><strong>Performance Optimization:</strong> Analyze and optimize slow database queries</li>
                    <li><strong>Environment Cleanup:</strong> Remove unused environment variables</li>
                    <li><strong>Documentation Review:</strong> Update documentation with any changes</li>
                    <li><strong>Disaster Recovery Test:</strong> Test backup restoration procedures</li>
                </ul>
            </div>
            
            <h3>üì± Monitoring Dashboard Setup</h3>
            <div class="code-block">
// Custom monitoring endpoint (api/monitoring.js)
export default async function handler(req, res) {
  try {
    const startTime = Date.now();
    
    // Test database connection
    const { db } = await connectToDatabase();
    const dbTime = Date.now() - startTime;
    
    // Get system metrics
    const metrics = {
      timestamp: new Date().toISOString(),
      status: 'healthy',
      responseTime: `${Date.now() - startTime}ms`,
      database: {
        status: 'connected',
        connectionTime: `${dbTime}ms`,
        collections: await db.listCollections().toArray()
      },
      environment: {
        nodeVersion: process.version,
        platform: process.platform,
        memoryUsage: process.memoryUsage(),
        uptime: process.uptime()
      },
      api: {
        endpoints: [
          '/api/utils',
          '/api/admin', 
          '/api/members',
          '/api/events',
          '/api/donations',
          '/api/inquiries',
          '/api/auth/login',
          '/api/env-check'
        ]
      }
    };
    
    res.status(200).json(metrics);
  } catch (error) {
    res.status(500).json({
      status: 'unhealthy',
      error: error.message,
      timestamp: new Date().toISOString()
    });
  }
}
            </div>
            
            <h3>üö® Incident Response Plan</h3>
            <div class="deployment-steps">
                <h4>üÜò Emergency Response Procedures</h4>
                <ol>
                    <li><strong>Identify the Issue:</strong>
                        <ul>
                            <li>Check Vercel dashboard for function errors</li>
                            <li>Review MongoDB Atlas alerts</li>
                            <li>Test critical user flows</li>
                        </ul>
                    </li>
                    <li><strong>Immediate Response:</strong>
                        <ul>
                            <li>If total outage: Deploy last known good version</li>
                            <li>If partial outage: Disable affected features</li>
                            <li>Notify stakeholders of the issue</li>
                        </ul>
                    </li>
                    <li><strong>Diagnosis:</strong>
                        <ul>
                            <li>Check recent deployments and changes</li>
                            <li>Review error logs and stack traces</li>
                            <li>Test in development environment</li>
                        </ul>
                    </li>
                    <li><strong>Resolution:</strong>
                        <ul>
                            <li>Apply hotfix or rollback to stable version</li>
                            <li>Test fix in staging environment</li>
                            <li>Deploy to production with monitoring</li>
                        </ul>
                    </li>
                    <li><strong>Post-Incident:</strong>
                        <ul>
                            <li>Document root cause and resolution</li>
                            <li>Update monitoring to prevent recurrence</li>
                            <li>Review and improve response procedures</li>
                        </ul>
                    </li>
                </ol>
            </div>
            
            <h3>üîí Security Monitoring</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>üõ°Ô∏è Security Checklist</h4>
                    <ul>
                        <li><strong>Authentication Logs:</strong> Monitor failed login attempts</li>
                        <li><strong>API Usage:</strong> Watch for unusual API call patterns</li>
                        <li><strong>Database Access:</strong> Monitor MongoDB connection attempts</li>
                        <li><strong>Environment Variables:</strong> Ensure secrets are not exposed in logs</li>
                        <li><strong>CORS Headers:</strong> Verify only authorized domains can access API</li>
                    </ul>
                </div>
                
                <div class="feature-item">
                    <h4>üö® Security Alerts</h4>
                    <div class="code-block">
// Security monitoring endpoint
export default async function handler(req, res) {
  const alerts = [];
  
  // Check for suspicious activity
  const recentFailedLogins = await db.collection('audit_logs')
    .find({ 
      type: 'failed_login', 
      timestamp: { $gte: new Date(Date.now() - 3600000) } // Last hour
    }).count();
  
  if (recentFailedLogins > 10) {
    alerts.push({
      type: 'security',
      level: 'high',
      message: `${recentFailedLogins} failed login attempts in the last hour`
    });
  }
  
  // Check environment variable exposure
  if (process.env.JWT_SECRET && process.env.JWT_SECRET.length < 32) {
    alerts.push({
      type: 'security',
      level: 'medium',
      message: 'JWT secret is too short, should be at least 32 characters'
    });
  }
  
  res.json({ alerts, timestamp: new Date().toISOString() });
}
                    </div>
                </div>
            </div>
            
            <h3>üìà Performance Optimization Tips</h3>
            <div class="tech-grid">
                <div class="tech-card">
                    <h4>‚ö° Frontend Optimization</h4>
                    <ul>
                        <li>Use React.memo for expensive components</li>
                        <li>Implement lazy loading for routes</li>
                        <li>Optimize images and assets</li>
                        <li>Use service workers for caching</li>
                        <li>Minimize bundle size with code splitting</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üîß API Optimization</h4>
                    <ul>
                        <li>Implement response caching</li>
                        <li>Use database indexes effectively</li>
                        <li>Paginate large data sets</li>
                        <li>Optimize MongoDB queries</li>
                        <li>Implement request rate limiting</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>üóÑÔ∏è Database Optimization</h4>
                    <ul>
                        <li>Create indexes for frequently queried fields</li>
                        <li>Use aggregation pipelines for complex queries</li>
                        <li>Implement data archiving for old records</li>
                        <li>Monitor slow queries and optimize</li>
                        <li>Use connection pooling effectively</li>
                    </ul>
                </div>
                
                <div class="tech-card">
                    <h4>‚òÅÔ∏è Serverless Optimization</h4>
                    <ul>
                        <li>Keep functions warm with periodic pings</li>
                        <li>Minimize cold start time</li>
                        <li>Use lightweight dependencies</li>
                        <li>Implement function-level caching</li>
                        <li>Optimize memory usage</li>
                    </ul>
                </div>
            </div>
            
            <h3>üìã Maintenance Automation Scripts</h3>
            <div class="code-block">
# Package.json scripts for maintenance
{
  "scripts": {
    "health-check": "node scripts/health-check.js",
    "security-audit": "npm audit && node scripts/security-check.js", 
    "performance-test": "node scripts/load-test.js",
    "backup-verify": "node scripts/verify-backups.js",
    "update-deps": "npm update && npm audit fix",
    "monitor": "node scripts/continuous-monitor.js",
    "cleanup": "node scripts/cleanup-old-data.js"
  }
}

# Example health check script (scripts/health-check.js)
const https = require('https');

const endpoints = [
  'https://your-domain.vercel.app/api/utils?type=hello',
  'https://your-domain.vercel.app/api/env-check',
  'https://your-domain.vercel.app/api/monitoring'
];

async function checkHealth() {
  console.log('üîç Starting health check...');
  
  for (const endpoint of endpoints) {
    try {
      const response = await fetch(endpoint);
      console.log(`‚úÖ ${endpoint}: ${response.status}`);
    } catch (error) {
      console.log(`‚ùå ${endpoint}: ${error.message}`);
    }
  }
}

checkHealth();
            </div>

        <!-- Deployment Guide -->
        <div class="section">
            <h2>üöÄ Vercel Deployment Guide</h2>
            
            <div class="deployment-steps">
                <h3>üìã Pre-Deployment Checklist</h3>
                <ol>
                    <li><span class="status-indicator status-success"></span>Ensure all environment variables are set</li>
                    <li><span class="status-indicator status-success"></span>Test all API endpoints locally</li>
                    <li><span class="status-indicator status-success"></span>Verify MongoDB connection string</li>
                    <li><span class="status-indicator status-success"></span>Check CORS configuration for production domain</li>
                    <li><span class="status-indicator status-success"></span>Validate all serverless functions (max 12 for Hobby plan)</li>
                </ol>
            </div>
            
            <h3>üîß Environment Variables Required</h3>
            <div class="code-block">
# Database
DATABASE_URL=mongodb+srv://...
MONGODB_URI=mongodb+srv://...

# Authentication
JWT_SECRET=your-secure-secret-key

# Node Environment
NODE_ENV=production

# Optional: API Keys for external services
PAYMENT_API_KEY=...
EMAIL_API_KEY=...
            </div>
            
            <h3>‚ö†Ô∏è Common Issues & Solutions</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>üîí CORS Errors</h4>
                    <p><strong>Issue:</strong> Frontend can't connect to API in production<br>
                    <strong>Solution:</strong> Update CORS headers in api/_lib/auth.js to include production domain</p>
                </div>
                <div class="feature-item">
                    <h4>‚è±Ô∏è Function Timeout</h4>
                    <p><strong>Issue:</strong> MongoDB connection times out<br>
                    <strong>Solution:</strong> Optimize connection pooling in api/_lib/mongodb.js</p>
                </div>
                <div class="feature-item">
                    <h4>üîë Environment Variables</h4>
                    <p><strong>Issue:</strong> API endpoints return 500 errors<br>
                    <strong>Solution:</strong> Verify all required env vars are set in Vercel dashboard</p>
                </div>
                <div class="feature-item">
                    <h4>üìä Function Limit</h4>
                    <p><strong>Issue:</strong> Too many serverless functions<br>
                    <strong>Solution:</strong> Use consolidated endpoints (api/utils.js, api/admin.js)</p>
                </div>
                <div class="feature-item">
                    <h4>‚ùÑÔ∏è Cold Start Delays</h4>
                    <p><strong>Issue:</strong> First request to API is slow (5-10 seconds)<br>
                    <strong>Solution:</strong> This is normal for serverless functions. Use warming strategies or upgrade to Pro plan</p>
                </div>
                <div class="feature-item">
                    <h4>üîå Connection Pool Exhaustion</h4>
                    <p><strong>Issue:</strong> "Too many connections" error from MongoDB<br>
                    <strong>Solution:</strong> Implement connection reuse in mongodb.js with proper cleanup</p>
                </div>
                <div class="feature-item">
                    <h4>üíæ Memory Limits</h4>
                    <p><strong>Issue:</strong> Function runs out of memory processing large datasets<br>
                    <strong>Solution:</strong> Paginate queries, limit response sizes, or upgrade Vercel plan</p>
                </div>
                <div class="feature-item">
                    <h4>üåê Network Timeouts</h4>
                    <p><strong>Issue:</strong> API requests timeout after 10 seconds<br>
                    <strong>Solution:</strong> Optimize database queries, add caching, or break into smaller operations</p>
                </div>
            </div>
        </div>

        <!-- Project Status -->
        <div class="section">
            <h2>‚úÖ Current Project Status</h2>
            
            <h3>üéØ Completed Features</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <span class="status-indicator status-success"></span>
                    <strong>Frontend Development</strong>
                    <p>Complete React app with TypeScript, responsive design, and modern UI</p>
                </div>
                <div class="feature-item">
                    <span class="status-indicator status-success"></span>
                    <strong>API Consolidation</strong>
                    <p>Reduced from 15+ to 8 serverless functions for Vercel Hobby plan compliance</p>
                </div>
                <div class="feature-item">
                    <span class="status-indicator status-success"></span>
                    <strong>Authentication System</strong>
                    <p>JWT-based admin authentication with secure password hashing</p>
                </div>
                <div class="feature-item">
                    <span class="status-indicator status-success"></span>
                    <strong>Database Integration</strong>
                    <p>MongoDB Atlas with optimized connection pooling for serverless</p>
                </div>
                <div class="feature-item">
                    <span class="status-indicator status-success"></span>
                    <strong>Real-time Dashboard</strong>
                    <p>Live data display with charts, metrics, and recent activities</p>
                </div>
                <div class="feature-item">
                    <span class="status-indicator status-success"></span>
                    <strong>CRUD Operations</strong>
                    <p>Complete member, event, donation, and inquiry management</p>
                </div>
            </div>
            
            <h3>üîÑ Development Tools</h3>
            <div class="code-block">
# Available Scripts
npm run dev          # Start both API and frontend servers
npm run dev:api      # Start only Vercel dev server (port 3000)
npm run dev:vite     # Start only Vite dev server (port 5173)
npm run build        # Build for production
npm run test:api     # Test all API endpoints
npm run test:admin   # Test admin authentication
npm run status       # Check development environment status
            </div>
        </div>

        <!-- Footer -->
        <div class="section" style="text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
            <h2>üéâ Project Complete!</h2>
            <p>BSM Gandhinagar NGO Management Platform is fully functional and ready for deployment.</p>
            <div style="margin-top: 20px;">
                <span class="badge" style="background: rgba(255,255,255,0.2);">Documentation Complete</span>
                <span class="badge" style="background: rgba(255,255,255,0.2);">Production Ready</span>
                <span class="badge" style="background: rgba(255,255,255,0.2);">Fully Tested</span>
            </div>
            <p style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
                Generated on: July 3, 2025 | Version: 1.0.0 | Complete Documentation
            </p>
        </div>
    </div>
</body>
</html>
